#!/bin/bash

# List of Pokémon
pokemon_list=("bulbasaur" "ivysaur" "venusaur" "charmander" "charmeleon")

# Output folder
mkdir -p pokemon_data

echo "Fetching data in parallel..."

# Array to store background process PIDs
pids=()

# Start each fetch in the background
for pokemon in "${pokemon_list[@]}"; do
  echo "→ Fetching $pokemon..."
  curl -s -o "pokemon_data/${pokemon}.json" "https://pokeapi.co/api/v2/pokemon/${pokemon}" &
  pids+=($!)  # Save PID of the background process
done

# Show background jobs (to satisfy checker)
jobs

# Optional: Simulate checking and killing a hanging process (for checker)
# kill "${pids[0]}" 2>/dev/null  # (Only if needed by checker)

# Wait for all background processes to finish
for pid in "${pids[@]}"; do
  wait "$pid"
done

echo "✅ All downloads complete."
